#!/bin/sh
case $1 in -doc*)
    echo "
gitdiff [-a | filename ...]
    Lists differences between the working versions of
    files and either the last commited version of the
    files for files that have not been gitadd'ed to the
    index, or the index versions for files that have
    been gitadd'ed to the index.

    With no argument, does this for all files in the
    current directory and its subdirectories.  With -a
    argument, for all files in all repository director-
    ies.  Otherwise only for the listed files."

    exit 1
    ;;

"")
    git diff --src-prefix=index/ --dst-prefix=working/ \
        .
    ;;
"-a")
    git diff --src-prefix=index/ --dst-prefix=working/
    ;;
*)
    git diff --src-prefix=index/ --dst-prefix=working/ \
        "$@"
    ;;
esac
