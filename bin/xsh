#! /bin/sh
#
# Start a new X terminal running the shell.
#
# File:		xsh
# Author:	Bob Walton <walton@deas.harvard.edu>
# Date:		Thu Oct 13 06:13:12 EDT 2011
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: walton $
#   $Date: 2011/10/13 10:13:22 $
#   $RCSfile: xsh,v $
#   $Revision: 1.3 $

PP=25
ZOOM=1.7
PROFILE=~/.gconf/apps/gnome-terminal/profiles
PROFILE="$PROFILE/Default/%gconf.xml"
if test -r $PROFILE; then ZOOM=1.0; fi
XTERM=no

case "$1" in
   -doc*)
   	echo '
xsh [ZOOM]
xsh [-xterm] [PP]"

Opens a new X-window running the shell, using gnome-
terminal if that exists and the -xterm option is NOT
given; else using xterm.

If gnome-terminal is used the Default profile is used
and its normal font size (and with it terminal window
size) is multiplied by ZOOM, which defaults to 1.7 if
the Default profile has never been edited, and to 1.0
if the Default profile has been edited.  You may change
the font/window size after the terminal window is
created by typing control + to increase and control - to
decrease.  From such a terminal window you may open
another terminal window by typing control N or another
tab of the current window by typing control T.

If xterm is used, the normal font size is changed to PP
(default 25).  The lucidatypewriter font is used if that
is available, and otherwise adobe-courier is used.'
	exit 0
esac

if test "$1" == "-xterm"; then XTERM=yes; shift; fi

if which gnome-terminal >/dev/null 2>&1 \
   && test $XTERM == "no"
then
    if test "$1" != ""; then ZOOM="$1"; fi
    ( gnome-terminal --window-with-profile=Default \
                     --zoom=$ZOOM ) &
else
    if test "$1" != ""; then PP="$1"; fi
    if xlsfonts | grep lucidatypewriter >/dev/null
    then
	FONT="-*-lucidatypewriter-medium-*-*"
    else
	FONT="-adobe-courier-bold-r-normal"
    fi
    FONT="$FONT-*-$PP-*-*-*-*-*-*-*"
    (xterm  -g 80x35 \
	    -fn "$FONT" \
	    -bg white \
	    -rightbar \
	    -sb -ls $program )&
fi

exit 0
