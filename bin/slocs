#! /bin/csh -f

if ( $#argv >= 2 && "$1" == "-debug" ) then
    set out = "grep '[^ 	]' | less"
    shift
else
    set out = "grep -c '[^ 	]'"
endif

set c = ()
foreach x ($argv:q)
    switch ( $x )
    case *.c:
    case *.cc:
    case *.java:
	set c = "$c (grep -v '^[ 	]*\/\/' $x | grep ';' ) ;"
	breaksw

    default:
	set c = "$c grep -v '^[ 	]*#' $x ;"
	breaksw

    endsw
end

eval "( $c ) | $out"

exit 0
