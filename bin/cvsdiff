#!/bin/sh
#
# Make diff listings of CVS repository files.
#
# File:		cvsdiff
# Author:	Bob Walton <walton@acm.org>
# Date:		Thu Mar 26 11:02:27 EDT 2009
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: walton $
#   $Date: 2009/03/26 15:06:46 $
#   $RCSfile: cvsdiff,v $
#   $Revision: 1.5 $

# Redirect all error output to the standard output.
#
exec 2>&1

case "$1" in
-doc*)
    echo '
cvsdiff [options] [file_or_directory ...]

    Make a diff listing with the latest version that YOU
    last checked out or in (as per cvsup or cvscom) of
    the given files and all files and subdirectories in
    each given directory, or if none given, of all the
    files and subdirectories in the current directory.

    Note that it is common to use `cvsdiff | less'"'"',
    as all cvs standard error output is piped by cvsdiff
    to the standard output, so it is unnecessary to do
    anything special with the standard error output.

    Some options are:

    -rX.Y	Diff with repository version X.Y instead
    		of with the last version YOU checked
		out or in.  Use cvslog to see list of
		committed versions and their dates for
		particular files (each file is differ-
		ent).

    -rHEAD	Diff with the last version checked in
    		by anyone, i.e., the latest version in
		the repository, instead of with the
		last version YOU checked out or in.

    -rT		Diff with the repository version that
    		was given tag T (see cvstag).

    diff(1)	You can use standard diff(1) options,
    option	such as -b, -w, --minimal.'
    exit 1
    ;;
esac

cvs diff "$@" 2>&1 | grep -v 'cvs.*: Diffing '
