#!/bin/sh
#
# Make diff listings of CVS repository files.
#
# File:		cvsdiff
# Author:	Bob Walton <walton@acm.org>
# Date:		Wed Mar 25 02:53:41 EDT 2009
#
# The authors have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.
#
# RCS Info (may not be true date or author):
#
#   $Author: walton $
#   $Date: 2009/03/25 07:30:52 $
#   $RCSfile: cvsdiff,v $
#   $Revision: 1.3 $

# Redirect all error output to the standard output.
#
exec 2>&1

case "$1" in
-doc*)
    echo '
cvsdiff [options] [file ...]

    Make a diff listing of the indicated files, or if no
    files given, of all the files in the current direc-
    tory and its subdirectories, with the lastest
    version of these files that YOU committed into the
    repository.  Some options are:

    -rX.Y	Diff with previous version X.Y instead
    		of with the last version YOU committed.
		Use cvslog to see list of committed
		versions and their dates.

    -rHEAD	Diff with the last version committed
    		by anyone, instead of with the last
		version YOU committed.

    -rT		Diff with the previous committed version
    		that was given tag T (see cvstag).

    -l		With no files given, diff only the files
    		in the current directory and ignore its
		subdirectories (suppress recursion).

    diff(1)	You can use standard diff(1) options,
    option	such as -b, -w, --minimal.'
    exit 1
    ;;
esac

cvs diff "$@" 2>&1 | grep -v 'cvs.*: Diffing '
