#!/bin/sh
case $1 in -doc*)
    echo "
gitsub filename ...
    For each filename, first copy any working version of
    the file to filename-, then copy any index version
    to the working directory, then copy any last commit-
    ted version to the index."
    exit 1
    ;;
esac

for f in "$@"
do
    if test -f "$f"
    then
	echo making backup in "$f-"
	mv -f "$f" "$f-"
    fi
    status=`git checkout-index -- "$f" 2>&1`
    if test -z "$status"
    then
        echo "sub '$f'"
    elif test -f "$f"
    then
        echo "$status"
    else
        echo "file not found in index '$f'"
    fi
    git reset HEAD -- "$f" >& /dev/null
done
