#!/bin/sh
#
# File:		gitconflict
# Author:	Bob Walton <walton@acm.org>
# Date:		Thu Apr 12 08:11:49 EDT 2012
#
# The author(s) have placed this program in the public
# domain; they make no warranty and accept no liability
# for this program.

case $1 in -doc*)
    echo "
gitconflict [ filename ...]
    Examine differences between the remote origin and
    the working files.  Does an implicit fetch of the
    \`origin' branch of the current repository.  Then
    if no arguments are given, just lists the files that
    differ between the remote origin and the working
    files.

    With arguments, produces gitdiff listings for chang-
    ing the remote origin versions of the named files to
    the working versions.  The argument \`.' will do
    this for just all files in the current directory and
    its subdirectories.  gitmerge can be used to merge
    remote origin files into the working files (which
    must be committed first)."  

    exit 1
    ;;

"")
    git fetch origin
    git diff --name-status origin/master
    ;;
?*)
    git fetch origin
    git diff origin/master \
        --src-prefix=origin/ --dst-prefix=working/ \
        -- "$@"
    ;;
esac
